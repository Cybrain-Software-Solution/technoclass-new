// Function to display Swal alert
function sweet_alert(heading, message, alert_type) {
    Swal.fire({
        title: heading,
        html: message,
        icon: alert_type,
        showCancelButton: false,
        confirmButtonText: 'Okay',
    });
}

// Function to handle form submission and validation
function ValidateFormSubmit(formclass, label = '') {
    jQuery(document).off().on("submit", "." + formclass, function(e) {
        e.preventDefault();
        var ajax_save_form = jQuery(this);
        var formaction = ajax_save_form.attr('data-action');
        jQuery.ajax({
            enctype: 'multipart/form-data',
            url: formaction,
            data: new FormData(this),
            method: 'post',
            dataType: 'json',
            processData: false,
            contentType: false,
            cache: false,
            timeout: 600000,

            beforeSend: function() {
                ajax_save_form.find(":submit").prop('disabled', true);
                ajax_save_form.find(":submit").html('Processing please wait...');
            },

            success: function(response) {
                var errorcode = '';
                ajax_save_form.find(":submit").prop('disabled', false);
                ajax_save_form.find(":submit").html(label);

                if (response.status) {
                    Swal.fire({
                        title: 'Success',
                        html: response.message,
                        icon: 'success',
                        showCancelButton: false,
                        confirmButtonText: 'Okay',
                    }).then((result) => {
                        if (result.isConfirmed) {
                            window.location.href = 'https://www.technoedtech.com/thankyou.php'; // Replace with your desired redirect URL
                        }
                    });
                } else {
                    sweet_alert('Error', response.message, 'error');
                }
            }
        });
    });
}

jQuery(document).ready(function() {
    var myforms = jQuery("form.ui-form-validations");
    myforms.each(function(i) {
        var myform = myforms.eq(i);
        myform.validate({
            highlight: function(element) {
                $(element).parent().addClass('formblank-has-error');
            },
            unhighlight: function(element) {
                $(element).parent().removeClass('formblank-has-error');
            },
        });
    });
});
